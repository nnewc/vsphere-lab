#cloud-config
# For more info on the format of this user-data file see the following links:
# https://discuss.hashicorp.com/t/wrong-indent-with-multiline-content-to-cloud-init-write-files-content-directives/35011/2
# https://developer.hashicorp.com/terraform/language/functions/templatefile#generating-json-or-yaml-from-a-template

users:
  - name: ${user}
    ssh-authorized-keys:
    - ${ssh_pubkey}
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    groups: sudo
    shell: /bin/bash
   # etcd User is Required for Installing with CIS Profile Enabled
  - name: etcd
    gecos: System Account for Running etcd Service
    sudo: false
    system: true
packages:
- vim
- bash-completion
runcmd:
- sysctl -p /etc/sysctl.d/90-kubelet.conf
- sudo systemctl disable firewalld
- sudo systemctl stop firewalld
